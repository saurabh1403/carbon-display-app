<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%">
	
	
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[

			import model.QuestionsProxy;
			import mx.collections.ArrayCollection;
			
			[Bindable]
			private var quesStatPieData:ArrayCollection = new ArrayCollection();		//this is populated for question stats data
			
			private function displayQuestionStat(data:Object, field:String, index:Number, percentValue:Number):String {
				var temp:String= (" " + percentValue).toString().substr(0,6);
				return data.quesState + ": " + data.number + '\n(' + temp + "%)";
			}

			public function updateView(quesProxy:QuestionsProxy):void
			{
				quesStatPieData.removeAll();
				
				var tempObj:Object = new Object();
				tempObj["quesState"] = "Correct"; 
				tempObj["number"] = quesProxy.testResult.totalCorrectQuestion;
				quesStatPieData.addItem(tempObj);
				
				tempObj = new Object();
				tempObj["quesState"] = "Wrong"; 
				tempObj["number"] = quesProxy.testResult.totalQuesAttempted - quesProxy.testResult.totalCorrectQuestion;
				quesStatPieData.addItem(tempObj);
				
				tempObj = new Object();
				tempObj["quesState"] = "Unattempted"; 
				tempObj["number"] = quesProxy.testResult.totalQuestions - quesProxy.testResult.totalQuesAttempted;
				quesStatPieData.addItem(tempObj);
			}

		]]>
	</fx:Script>

	
	<s:Image 
		width="100%" height="100%"
		source="@Embed('assets/old-paper1.jpg')"
		smooth="true"
		smoothingQuality="high"
		scaleMode="stretch"
		/>
	
	<s:Label top="35" color="#242323" fontFamily="Arial"
			 fontSize="22" fontStyle="italic" horizontalCenter="0"
			 text="Questions Statistics" textAlign="center" textDecoration="underline"
			 verticalAlign="middle" fontWeight="bold"/>
	
	<mx:PieChart id="piechart1" width="75%" height="65%"
				 chromeColor="#A8A6A6" color="#FDFAFA"
				 dataProvider="{quesStatPieData}" fontSize="12" fontStyle="italic"
				 fontWeight="bold" horizontalCenter="0" verticalCenter="-20">
		
		<mx:series>
			<mx:PieSeries id="ps" 
						  field="number" 
						  explodeRadius="0.05"
						  nameField="quesState"
						  outerRadius="1"
						  displayName="quesState"
						  labelPosition="insideWithCallout" 
						  labelFunction="displayQuestionStat" 
						  fontAntiAliasType="advanced"
						  fontGridFitType="pixel"
						  fontStyle="italic"
						  />
		</mx:series>
	</mx:PieChart>
	
	<mx:Legend left="30" bottom="20" width="50%" height="10%"
			   color="#F8F2F2" dataProvider="{piechart1}" fontFamily="Verdana" fontSize="20"
			   fontStyle="italic" fontWeight="bold" fontAntiAliasType="advanced" fontThickness="100" textAlign="left" verticalAlign="middle"/>
	
</s:Group>
